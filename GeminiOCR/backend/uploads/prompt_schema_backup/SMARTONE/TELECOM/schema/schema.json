{
  "title": "SmarTone Telecommunication Bill",
  "description": "Schema for data extracted from a SmarTone monthly statement.",
  "type": "object",
  "properties": {
    "company_name": {
      "description": "The name of the account holder, typically found at the top-left of the first page.",
      "type": "string"
    },
    "account_number": {
      "description": "The unique 8-digit account number for the bill.",
      "type": "string"
    },
    "statement_date": {
      "description": "The date the bill was issued, in YYYY-MM-DD format.",
      "type": "string",
      "format": "date"
    },
    "cutoff_date": {
      "description": "The end date for the billing period, in YYYY-MM-DD format.",
      "type": "string",
      "format": "date"
    },
    "previous_balance": {
      "description": "Details of the previous month's balance.",
      "type": "object",
      "properties": {
        "previous_total": {
          "description": "The total amount from the previous bill.",
          "type": "number"
        },
        "payment_received": {
          "description": "The payment received for the previous bill. Extracted as a negative number from a 'CR' value.",
          "type": "number"
        }
      },
      "required": [
        "previous_total",
        "payment_received"
      ]
    },
    "current_charges_total": {
      "description": "The total amount due for the current billing period.",
      "type": "number"
    },
    "payment_details": {
      "description": "Details regarding the automatic payment for the current bill.",
      "type": "object",
      "properties": {
        "autopay_amount": {
          "description": "The amount that will be debited via autopay.",
          "type": "number"
        },
        "autopay_date": {
          "description": "The scheduled date for the autopay transaction, in YYYY-MM-DD format.",
          "type": "string",
          "format": "date"
        }
      },
      "required": [
        "autopay_amount",
        "autopay_date"
      ]
    },
    "phone_bill_details": {
      "description": "An array containing the detailed billing breakdown for each phone number on the account.",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "phone_number": {
            "description": "The 8-digit phone number for which the charges apply.",
            "type": "string"
          },
          "subtotal": {
            "description": "The total charges for this specific phone number for the billing period.",
            "type": "number"
          },
          "charge_items": {
            "description": "An array of individual charge or credit items for this phone number.",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "description": {
                  "description": "The description of the charge or credit item.",
                  "type": "string"
                },
                "service_period_or_date": {
                  "description": "The date or date range for the service, formatted as YYYY-MM-DD or YYYY-MM-DD - YYYY-MM-DD.",
                  "type": "string"
                },
                "amount": {
                  "description": "The amount of the charge. This will be positive for charges and negative for credits (marked 'CR' on the bill).",
                  "type": "number"
                }
              },
              "required": [
                "description",
                "service_period_or_date",
                "amount"
              ]
            }
          }
        },
        "required": [
          "phone_number",
          "subtotal",
          "charge_items"
        ]
      }
    }
  },
  "required": [
    "company_name",
    "account_number",
    "statement_date",
    "cutoff_date",
    "previous_balance",
    "current_charges_total",
    "payment_details",
    "phone_bill_details"
  ]
}